"0","# Your list of dataframes"
"0","merged_dfs <- list("
"0","  Merged_100 = Merged_100,"
"0","  Merged_550 = Merged_550,"
"0","  bg_Merged_clips_sum = bg_Merged_clips_sum,"
"0","  both_Merged_clips_sum = both_Merged_clips_sum"
"0",")"
"0",""
"0","# Apply extract_metadata to each dataframe"
"0","merged_dfs <- lapply(merged_dfs, function(df) {"
"0","  extract_metadata("
"0","    df = df,"
"0","    source_col = ""TrialName"","
"0","    structure = c(""Genus"", ""species"", ""expTreatment"", ""Individual""),"
"0","    keep = c(""Species"", ""Individual""),"
"0","    composite_vars = list(Species = c(""Genus"", ""species"")),"
"0","    insert_after = ""TrialName"""
"0","  )"
"0","})"
"0",""
"0","# (Optional) Assign back to individual dataframes"
"0","Merged_100 <- merged_dfs$Merged_100"
"0","Merged_550 <- merged_dfs$Merged_550"
"0","bg_Merged_clips_sum <- merged_dfs$bg_Merged_clips_sum"
"0","both_Merged_clips_sum <- merged_dfs$both_Merged_clips_sum"
"0",""
"0","# List of dataframes with desired filenames (without .csv extension)"
"0","merged_dfs <- list("
"0","  Merged_100 = Merged_100,"
"0","  Merged_550 = Merged_550,"
"0","  bg_Merged_clips_sum = bg_Merged_clips_sum,"
"0","  both_Merged_clips_sum = both_Merged_clips_sum"
"0",")"
"0",""
"0","# Write each to CSV"
"0","output_dir <- file.path(getwd(), ""CleanData"")"
"0","for (name in names(merged_dfs)) {"
"0","  file_path <- file.path(output_dir, paste0(name, "".csv""))"
"0","  write_csv(merged_dfs[[name]], file_path)"
"0","}"
