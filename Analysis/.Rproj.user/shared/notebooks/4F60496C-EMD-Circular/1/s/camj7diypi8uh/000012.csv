"0","# Create output directories"
"0","dir.create(""Figures/MotionPatterns/Plots/ClipPlots"", recursive = TRUE, showWarnings = FALSE)"
"0","dir.create(""Figures/MotionPatterns/Plots/ClipPlots/Combined"", recursive = TRUE, showWarnings = FALSE)"
"0",""
"0","# Get all unique ClipNames from FullClipName"
"0","unique_clips <- unique(EMDOverlay_clipsummary$ClipName)"
"0",""
"0","# Loop through each unique ClipName"
"0","for (clip in unique_clips) {"
"0","  message(""▶️ Processing: "", clip)"
"0",""
"0","  # Generate and save all plots"
"0","  plots <- plot_motion("
"0","    clipname     = clip,"
"0","    frame_data   = EMDOverlay_frames,"
"0","    summary_data = EMDOverlay_clipsummary,"
"0","    output_dir   = ""Figures/Motion_plots"","
"0","    save_circular  = TRUE,"
"0","    save_direction = TRUE,"
"0","    save_magnitude = TRUE"
"0","  )"
"0",""
"0","  # Combine the three saved plots"
"0","  combine_motion_plots_by_clipname("
"0","    clipname    = clip,"
"0","    input_dir   = ""Figures/MotionPatterns/Plots/ClipPlots"","
"0","    output_dir  = ""Figures/MotionPatterns/Plots/ClipPlots/Combined"""
"0","  )"
"0","}"
"0",""
